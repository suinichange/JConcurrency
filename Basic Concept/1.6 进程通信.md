## 进程通信

　　进程通信是指进程之间的信息交换。由于进程的互斥与同步，需要在进程间交换一定的信息。

## 进程通信的类型

　　目前通信机制可归结为四大类：**共享存储器系统、管道通信系统、消息传递系统以及客户机－服务器系统。**

### 共享存储系统

　　在共享存储器系统中，相互通信的进程共享某些数据结构或共享存储区，进程之间能够通过这些空间进行通信。

　　（1）基于共享数据结构的通信方式：在这种通信方式中，要求诸进程公用某些数据结构，借以实现诸进程间的信息交换，如在生产者－消费者问题中的有界缓冲区。

　　（2）基于共享存储区的通信方式：为了传输大量数据，在内存中划出了一块共享存储区域，诸进程可通过对该共享区的读或写交换信息，实现通信。

### 管道（pipe）通信系统

　　所谓“管道”是指用于连接一个读进程和一个写进程以实现它们之间通信的一个共享文件，又名pipe文件。向管道（共享文件）提供输入的发送进程（即写进程）以字符流形式将大量的数据送入管道：而接受管道输出的接收进程（即读进程）则从管道中接收（读）数据。由于发送进程和接收进程是利用管道进行通信的，故又称为管道通信。

　　这种方式首创于UNX系统，由于它能有效地传送大量数据，因而又被引入到许多其它操作系统中。

### 消息使递系统（ Message passing system）

　　在该机制中，进程不必借助任何共享存储区或数据结构，而是以格式化的消息为单位，将通信的数据封装在消息中，并利用操作系统提供的一组通信命令（原语），在进程间进行消息传递，完成进程间的数据交换。

　　该方式隐藏了通信实现细节，使通信过程对用户透明化，降低了通信程序设计的复杂性和错误率，成为当前应用最为广泛的一类进程间通信的机制。例如：在计算机网络中，消息（ message）又称为报文；在徹内核操作系统中，微内核与服务器之间的通信无一例外都是采用了消息传递机制。由于该机制能很好地支持多处理机系统、分布式系统和计算机网络，因此也成为这些领域最主要的通信工具。

　　消息传递系统的两种方式：

　　（1）直接通信方式：是指发送进程利用OS所提供的发送原语，直接把消息发送给目标进程。

　　（2）间接通信方式：是指发送和接收进程，都通过共享中间实体（称为邮箱）的方式进行消息的发送和接收，完成进程间的通信。

### 客户机－服务器系统（ Client－ Server system）

　　前面所述的共享内存、消息传递等技术，虽然也可以用于实现不同计算机间进程的双向通信，但客户机一服务器系统的通信机制，在网络环境的各种应用领域已成为当前主流的通信实现机制，其主要的实现方法分为三类：套接字、远程过程调用和远程方法调用。

　　**套接字（ Socket）**

　　一个套接字就是一个通信标识类型的数据结构，包含了通信目的的地址、通信使用的端口号、通信网络的传输层协议、进程所在的网络地址，以及针对客户或服务器程序提供的不同系统调用（或API函数）等，是进程通信和网络通信的基本构件。

　　网络中的套接字通常采用的是非对称方式通信，即发送者需要提供接收者命名。通信双方的进程运行在不同主机的网络环境下，被分配了一对套接字，一个属于服务器端，一个属于客户端。一般地，客户端发出连接请求时，随机申请一个套接字，主机为之分配一个端口，与该套接字绑定，不再分配给其它进程。服务器端拥有全局公认的套接字和指定的端口（如ftp服务器监听端口为21，Web或http服务器监听端口为80），并通过监听端口等待客户请求。因此，任何进程都可以向它发出连接请求和信息请求，以方便进程之间建立连接。服务器端一且收到请求，就接受来自客户端的连接，完成连接后主机间传输的数据就可以准确地发送到通信进程，实现进程间的通信。当通信结束时，系统通过关闭接收服务器端的套接字撤销连接。

　　远程过程（或是方法）调用

　　远程过程（函数）调用RPC（ Remote Procedure Call），是一个通信协议，用于通过网络连接的系统，该协议允许运行于一台主机（本地）系统上的进程调用另一台主机（远程）系统上的进程，而对程序员表现为常规的过程调用，无需额外地为此编程。如果涉及的软件采用面向对象编程，那么远程过程调用亦可称做远程方法调用。
