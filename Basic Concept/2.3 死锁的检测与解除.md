## 死锁的检测与解除

　　如果在系统中，既不采取死锁预防描施，也未配有死锁避免算法，系统很可能会发生死锁。在这种情况下，系统应当提供两个算法：

　　（1）死锁检测算法。该方法用于检测系统状态，以确定系统中是否发生了死锁。

　　（2）死锁解除算法。当认定系统中已发生了死锁，利用该算法可将系统从死锁状态中解脱出来。
　　
### 死锁的检测

　　为了能对系统中是否已发生了死锁进行检测，在系统中必须：保存有关资源的请求和分配信息，和提供一种算法，它利用这些信息来检测系统是否已进入死锁状态。

### 死锁的解除

　　如果利用死锁检测算法检测出在系统中己发生了死锁，则应立即采取相应的措施，以解除死锁。最简单的处理措施就是立即通知操作员，请操作员来以人工方法处理死锁。另种措施则是利用死锁解除算法，把系统从死锁状态中解脱出来。常采用解除死锁的两种方法是

　　（1）抢占资源。从一个或多个进程中抢占足够数量的资源，分配给死锁进程，以解除死锁状态。

　　（2）终止（或撤消）进程。终止（或撤消）系统中的一个或多个死锁进程，直至打破循环环路，使系统从死锁状态解脱出来。

### 终止进程的方法

　　1）终止所有死锁进程

　　这是一种最简单的方法，即是终止所有的死锁进程，死锁自然也就解除了，但所付出的代价可能会很大。因为其中有些进程可能已经运行了很长时间，已接近结東，一旦被终止真可谓“功亏一蒉”，以后还得从头再来。还可能会有其它方面的代价。

　　2）逐个终止进程

　　稍微温和的方法是，按照某种顺序，逐个地终止进程，直至有足够的资源，以打破循环等待，把系统从死锁状态解脱出来为止。但该方法所付出的代价也可能很大。

　　稍微温和的方法是，按照某种顺序，逐个地终止进程，直至有足够的资源，以打破循环等待，把系统从死锁状态解脱出来为止。但该方法所付出的代价也可能很大。因为每终止一个进程，都需要用死锁检测算法确定系统死锁是否已经被解除，若未解除还需再终止另一个进程。另外，在采取逐个终止进程策略时，还涉及到应采用什么策略选择一个要终止的进程。选择策略最主要的依据是，为死锁解除所付出的“代价最小”。但怎么样才算是“代价最小”，很难有一个精确的度量。我们在此仅提供在选择被终止进程时应考虑的若干因素：

　　（1）进程的优先级的大小

　　（2）进程已执行了多少时间，还需要多少时间方能完成？

　　（3）进程在运行中已经使用资源的多少，以后还需要多少资源？

　　（4）进程的性质是交互式的还是批处理式的？